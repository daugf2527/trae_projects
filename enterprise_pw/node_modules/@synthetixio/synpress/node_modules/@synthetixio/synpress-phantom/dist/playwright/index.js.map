{"version":3,"sources":["../../src/type/PhantomAbstract.ts","../../src/selectors/pages/OnboardingPage/getStartedPage.ts","../../src/selectors/createDataTestSelector.ts","../../src/selectors/pages/OnboardingPage/secretRecoveryPhrasePage.ts","../../src/selectors/pages/OnboardingPage/walletCreationSuccessPage.ts","../../src/selectors/pages/OnboardingPage/index.ts","../../src/playwright/pages/OnboardingPage/actions/importWallet.ts","../../src/playwright/pages/OnboardingPage/actions/helpers/confirmSecretRecoveryPhrase.ts","../../src/playwright/pages/OnboardingPage/actions/helpers/createPassword.ts","../../src/playwright/pages/OnboardingPage/page.ts","../../src/selectors/pages/UnlockPage/index.ts","../../src/selectors/loading/index.ts","../../src/selectors/pages/HomePage/settings.ts","../../src/selectors/pages/HomePage/index.ts","../../src/selectors/pages/NotificationPage/actionFooter.ts","../../src/selectors/pages/NotificationPage/signaturePage.ts","../../src/selectors/pages/NotificationPage/transactionPage.ts","../../src/selectors/pages/NotificationPage/index.ts","../../src/playwright/utils/waitForSpinnerToVanish.ts","../../src/playwright/pages/UnlockPage/actions/unlock.ts","../../src/playwright/pages/UnlockPage/page.ts","../../src/playwright/pages/HomePage/actions/addNewAccount.ts","../../src/playwright/pages/HomePage/actions/closeSuiAndMonadScreen.ts","../../src/playwright/pages/HomePage/actions/importWalletFromPrivateKey.ts","../../src/playwright/utils/waitFor.ts","../../src/playwright/pages/HomePage/actions/lock.ts","../../src/playwright/pages/HomePage/actions/renameAccount.ts","../../src/playwright/utils/allTextContents.ts","../../src/playwright/pages/HomePage/actions/settings.ts","../../src/playwright/pages/HomePage/actions/switchAccount.ts","../../src/playwright/pages/HomePage/actions/toggleTestnetMode.ts","../../src/playwright/pages/HomePage/actions/getAccountAddress.ts","../../src/playwright/pages/HomePage/page.ts","../../src/playwright/utils/getNotificationPageAndWaitForLoad.ts","../../src/type/GasSettings.ts","../../src/playwright/pages/NotificationPage/actions/transaction.ts","../../src/playwright/pages/NotificationPage/actions/approvePermission.ts","../../src/playwright/pages/NotificationPage/actions/closeUnsupportedNetworkWarning.ts","../../src/playwright/pages/NotificationPage/actions/connectToDapp.ts","../../src/playwright/pages/NotificationPage/actions/signSimpleMessage.ts","../../src/playwright/pages/NotificationPage/page.ts","../../src/playwright/Phantom.ts","../../src/playwright/fixtures/phantomFixtures.ts","../../src/prepareExtensionPhantom.ts","../../src/playwright/fixture-actions/unlockForFixture.ts","../../src/playwright/fixture-actions/getExtensionId.ts","../../src/playwright/fixture-actions/persistLocalStorage.ts","../../src/playwright/utils/loadAndWaitForPopupPage.ts","../../src/playwright/utils/waitForTestPageLoad.ts"],"names":["StepSelectors","expect","z","path","fs"],"mappings":"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","sourcesContent":["import type { GasSettings } from './GasSettings'\nimport type { Networks } from './Networks'\n\nexport abstract class PhantomAbstract {\n  /**\n   * @param password - The password of the Phantom wallet.\n   * @param extensionId - The extension ID of the Phantom extension. Optional if no interaction with the dapp is required.\n   *\n   * @returns A new instance of the Phantom class.\n   */\n  constructor(\n    /**\n     * The password of the Phantom wallet.\n     */\n    readonly password: string,\n    /**\n     * The extension ID of the Phantom extension. Optional if no interaction with the dapp is required.\n     */\n    readonly extensionId?: string\n  ) {\n    this.password = password\n    this.extensionId = extensionId\n  }\n\n  /**\n   * Imports a wallet using the given seed phrase.\n   *\n   * @param seedPhrase - The seed phrase to import.\n   */\n  abstract importWallet(seedPhrase: string): void\n\n  /**\n   * Adds a new account with the given name. This account is based on the initially imported seed phrase.\n   *\n   * @param accountName - The name of the new account.\n   */\n  abstract addNewAccount(accountName: string): void\n\n  /**\n   * Imports a wallet using the given private key.\n   *\n   * @param privateKey - The private key to import.\n   */\n  abstract importWalletFromPrivateKey(network: Networks, privateKey: string, walletName?: string): void\n\n  /**\n   * Switches to the account with the given name.\n   *\n   * @param accountName - The name of the account to switch to.\n   */\n  abstract switchAccount(accountName: string): void\n\n  /**\n   * Retrieves the current account address.\n   */\n  abstract getAccountAddress(network: Networks): void\n\n  /**\n   * Connects to the dapp using the currently selected account.\n   */\n  abstract connectToDapp(account?: string): void\n\n  /**\n   * Locks Phantom.\n   */\n  abstract lock(): void\n\n  /**\n   * Unlocks Phantom.\n   */\n  abstract unlock(): void\n\n  /**\n   * Confirms a signature request. This function supports all types of commonly used signatures.\n   */\n  abstract confirmSignature(): void\n\n  /**\n   * Confirms a signature request with potential risk.\n   */\n  abstract confirmSignatureWithRisk(): void\n\n  /**\n   * Rejects a signature request. This function supports all types of commonly used signatures.\n   */\n  abstract rejectSignature(): void\n\n  /**\n   * Confirms a transaction request.\n   *\n   * @param options - The transaction options.\n   * @param options.gasSetting - The gas setting to use for the transaction.\n   */\n  abstract confirmTransaction(options?: { gasSetting?: GasSettings }): void\n\n  /**\n   * Rejects a transaction request.\n   */\n  abstract rejectTransaction(): void\n\n  /**\n   * Approves a permission request to spend tokens.\n   *\n   * ::: warning\n   * For NFT approvals, use `confirmTransaction` method.\n   * :::\n   *\n   * @param options - The permission options.\n   * @param options.spendLimit - The spend limit to use for the permission.\n   * @param options.gasSetting - The gas setting to use for the approval transaction.\n   */\n  abstract approveTokenPermission(options?: {\n    spendLimit?: 'max' | number\n    gasSetting?: GasSettings\n  }): void\n\n  /**\n   * Rejects a permission request to spend tokens.\n   *\n   * ::: warning\n   * For NFT approvals, use `confirmTransaction` method.\n   * :::\n   */\n  abstract rejectTokenPermission(): void\n\n  /**\n   * Navigates to the home page of Phantom tab.\n   */\n  abstract goToHomePage(): void\n\n  /**\n   * Goes back to the home page of Phantom tab.\n   */\n  abstract goBackToHomePage(): void\n\n  /**\n   * Opens the settings page.\n   */\n  abstract openSettings(): void\n\n  /**\n   * Toggles the \"Show Test Networks\" setting.\n   *\n   * ::: warning\n   * This function requires the correct menu to be already opened.\n   * :::\n   */\n  abstract toggleTestnetMode(): void\n\n  /**\n   * Resets the account.\n   *\n   * ::: warning\n   * This function requires the correct menu to be already opened.\n   * :::\n   */\n  abstract resetApp(): void\n}\n","export default {\n  importWallet: 'text=I already have a wallet',\n  importRecoveryPhraseButton: 'text=Import Recovery Phrase'\n}\n","export const createDataTestSelector = (dataTestId: string) => {\n  if (dataTestId.includes(' ')) {\n    throw new Error('[CreateDataTestSelector] dataTestId cannot contain spaces')\n  }\n\n  return `[data-testid=\"${dataTestId}\"]`\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nconst recoveryStep = {\n  secretRecoveryPhraseWord: (index: number) => createDataTestSelector(`secret-recovery-phrase-word-input-${index}`),\n  confirmSecretRecoveryPhraseButton: createDataTestSelector('onboarding-form-submit-button'),\n  error: createDataTestSelector('onboarding-import-secret-recovery-phrase-error-message')\n}\n\nconst viewAccountsButton = createDataTestSelector('onboarding-form-secondary-button')\n\nconst continueButton = createDataTestSelector('onboarding-form-submit-button')\n\nconst passwordStep = {\n  passwordInput: createDataTestSelector('onboarding-form-password-input'),\n  confirmPasswordInput: createDataTestSelector('onboarding-form-confirm-password-input'),\n  acceptTermsCheckbox: createDataTestSelector('onboarding-form-terms-of-service-checkbox'),\n  continue: continueButton,\n  error: `${createDataTestSelector('create-password-new')} + h6 > span > span`\n}\n\nconst allDone = `text=You're all ready!`\n\nexport default {\n  recoveryStep,\n  viewAccountsButton,\n  continueButton,\n  passwordStep,\n  allDone\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nexport default {\n  confirmButton: createDataTestSelector('onboarding-complete-done')\n}\n","import GetStartedPageSelectors from './getStartedPage'\nimport SecretRecoveryPhrasePageSelectors from './secretRecoveryPhrasePage'\nimport WalletCreationSuccessPageSelectors from './walletCreationSuccessPage'\n\n// biome-ignore format: empty lines should be preserved\nexport default {\n  GetStartedPageSelectors,\n  SecretRecoveryPhrasePageSelectors,\n  WalletCreationSuccessPageSelectors,\n};\n","import { type Page, expect } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/OnboardingPage'\nimport { confirmSecretRecoveryPhrase, createPassword } from './helpers'\n\nexport async function importWallet(page: Page, seedPhrase: string, password: string) {\n  await page.locator(Selectors.GetStartedPageSelectors.importWallet).click()\n\n  await page.locator(Selectors.GetStartedPageSelectors.importRecoveryPhraseButton).click()\n\n  await confirmSecretRecoveryPhrase(page, seedPhrase)\n\n  await expect(\n    page.locator(Selectors.SecretRecoveryPhrasePageSelectors.viewAccountsButton),\n    'Import accounts success screen should be visible'\n  ).toBeVisible({ timeout: 60_000 })\n\n  await page.locator(Selectors.SecretRecoveryPhrasePageSelectors.continueButton).click()\n\n  await createPassword(page, password)\n\n  await expect(\n    page.locator(Selectors.SecretRecoveryPhrasePageSelectors.allDone),\n    'All Done success screen should be visible'\n  ).toBeVisible({ timeout: 10_000 })\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../../selectors/pages/OnboardingPage'\n\nconst StepSelectors = Selectors.SecretRecoveryPhrasePageSelectors.recoveryStep\n\nexport async function confirmSecretRecoveryPhrase(page: Page, seedPhrase: string) {\n  const seedPhraseWords = seedPhrase.split(' ')\n\n  for (const [index, word] of seedPhraseWords.entries()) {\n    await page.locator(StepSelectors.secretRecoveryPhraseWord(index)).fill(word)\n  }\n\n  await page.locator(StepSelectors.confirmSecretRecoveryPhraseButton).click()\n\n  if (await page.locator(StepSelectors.error).isVisible({ timeout: 2_000 })) {\n    const errorText = await page.locator(StepSelectors.error).textContent({\n      timeout: 1000\n    })\n    throw new Error(`[ConfirmSecretRecoveryPhrase] Invalid seed phrase. Error from Phantom: ${errorText}`)\n  }\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../../selectors/pages/OnboardingPage'\n\nconst StepSelectors = Selectors.SecretRecoveryPhrasePageSelectors.passwordStep\n\nexport async function createPassword(page: Page, password: string) {\n  await page.locator(StepSelectors.passwordInput).fill(password)\n  await page.locator(StepSelectors.confirmPasswordInput).fill(password)\n\n  // Using `locator.click()` instead of `locator.check()` as a workaround due to dynamically appearing elements.\n  await page.locator(StepSelectors.acceptTermsCheckbox).click()\n\n  await page.locator(StepSelectors.continue).click()\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../selectors/pages/OnboardingPage'\nimport { importWallet } from './actions'\n\nexport class OnboardingPage {\n  static readonly selectors = Selectors\n  readonly selectors = Selectors\n\n  readonly page: Page\n\n  constructor(page: Page) {\n    this.page = page\n  }\n\n  async importWallet(seedPhrase: string, password: string) {\n    return await importWallet(this.page, seedPhrase, password)\n  }\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nexport default {\n  passwordInput: createDataTestSelector('unlock-form-password-input'),\n  submitButton: createDataTestSelector('unlock-form-submit-button')\n}\n","export const LoadingSelectors = {\n  spinner: '.spinner',\n  loadingOverlay: '.loading-overlay',\n  loadingIndicators: [\n    '.loading-logo',\n    '.loading-spinner',\n    '.loading-overlay',\n    '.loading-overlay__spinner',\n    '.loading-span',\n    '.loading-indicator',\n    '#loading__logo',\n    '#loading__spinner',\n    '.mm-button-base__icon-loading',\n    '.loading-swaps-quotes',\n    '.loading-heartbeat'\n  ]\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nconst devSettings = {\n  toggleTestnetMode: createDataTestSelector('toggleTestNetwork'),\n  toggleEnableCopyTransaction: createDataTestSelector('solana-copy-transaction')\n}\n\nconst securityAndPrivacy = {\n  resetApp: 'button:has-text(\"Reset App\")'\n}\n\nexport default {\n  securityAndPrivacyButton: createDataTestSelector('settings-item-security-and-privacy'),\n  lockWallet: createDataTestSelector('lock-menu-item'),\n  unlocWallet: createDataTestSelector('data-testid=\"unlock-form-submit-button\"'),\n  developerSettingsButton: 'button:has-text(\"Developer Settings\")',\n  closeSettingsButton: createDataTestSelector('settings-menu-close-button'),\n\n  devSettings,\n  securityAndPrivacy\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\nimport settings from './settings'\n\nconst addNewAccountMenu = {\n  accountNameInput: `input[placeholder=\"Name\"]`,\n  createButton: `button${createDataTestSelector('primary-button')}:has-text(\"Create\")`\n}\n\nconst renameAccountMenu = {\n  saveButton: `button${createDataTestSelector('primary-button')}:has-text(\"Save\")`\n}\n\nconst importAccountMenu = {\n  networkOpenMenu: '[aria-haspopup=\"listbox\"][role=\"button\"]:has-text(\"Solana\")',\n  ethereumNetwork: '[data-label=\"Ethereum\"]',\n  baseNetwork: '[data-label=\"Base\"]',\n  polygonNetwork: '[data-label=\"Polygon\"]',\n  bitcoinNetwork: '[data-label=\"Bitcoin\"]',\n  nameInput: 'input[name=\"name\"]',\n  privateKeyInput: 'textarea[placeholder=\"Private key\"]',\n  importButton: 'button:has-text(\"Import\")',\n  error: 'textarea[placeholder=\"Private key\"] + div'\n}\n\nconst addAccountMenu = {\n  addAccountButton: createDataTestSelector('sidebar_menu-button-add_account'),\n  createNewAccountButton: createDataTestSelector('add-account-create-new-wallet-button'),\n  importAccountPrivateKeyButton: 'text=Import Private Key',\n  addNewAccountMenu,\n  importAccountMenu\n}\n\nconst editAccountMenu = {\n  accountNameButton: 'button:has-text(\"Account Name\")'\n}\n\nconst accountMenu = {\n  accountName: createDataTestSelector('home-header-account-name'),\n  accountButton: createDataTestSelector('settings-menu-open-button'),\n  accountNames: '#accounts button > div:nth-child(2)',\n  manageAccountsButton: createDataTestSelector('sidebar_menu-button-manage_accounts'),\n  settings: createDataTestSelector('sidebar_menu-button-settings'),\n  addAccountMenu,\n  renameAccountMenu\n}\n\nconst manageAccountButton = (accountName: string) =>\n  `[role=\"button\"][data-testid=\"manage-accounts-sortable-${accountName}\"]`\n\nexport default {\n  solanaWalletAddress: createDataTestSelector('account-header-chain-solana:101'),\n  ethereumWalletAddress: createDataTestSelector('account-header-chain-eip155:1'),\n  baseWalletAddress: createDataTestSelector('account-header-chain-eip155:8453'),\n  polygonWalletAddress: createDataTestSelector('account-header-chain-eip155:137'),\n  bitcoinWalletAddress: createDataTestSelector('account-header-chain-bip122:000000000019d6689c085ae165831e93'),\n  copyAccountAddressButton: createDataTestSelector('address-copy-button-text'),\n  currentNetwork: `${createDataTestSelector('network-display')} span:nth-of-type(1)`,\n  headerBackButton: `section:has-text(\"Developer Settings\") ${createDataTestSelector('header--back')}`,\n  settings,\n  accountMenu,\n  editAccountMenu,\n  manageAccountButton\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nexport default {\n  connectActionButton: `button${createDataTestSelector('primary-button')}:has-text(\"Connect\")`,\n  confirmActionButton: `button${createDataTestSelector('primary-button')}:has-text(\"Confirm\")`,\n  continueActionButton: `button${createDataTestSelector('primary-button')}:has-text(\"Continue\")`,\n  cancelActionButton: `button${createDataTestSelector('secondary-button')}:has-text(\"Cancel\")`,\n  closeActionButton: createDataTestSelector('button-close')\n}\n","import { createDataTestSelector } from '../../createDataTestSelector'\n\nconst structuredMessage = {\n  scrollDownButton: `.signature-request-message ${createDataTestSelector('signature-request-scroll-button')}`\n}\n\nconst riskModal = {\n  proceedAnyway: 'text=Proceed anyway (unsafe)',\n  confirmUnsafe: 'text=Confirm (unsafe)',\n  acknowledgeRisks: createDataTestSelector('acknowledge--button'),\n  reconfirmUnsafe: 'text=Yes, confirm (unsafe)'\n}\n\nexport default {\n  structuredMessage,\n  riskModal\n}\n","const editGasFeeMenu = {\n  editGasFeeButton: 'button:has-text(\"Network Fee\")',\n  slowGasFeeButton: 'div > div p:has-text(\"Slow\")',\n  fastGasFeeButton: 'div > div p:has-text(\"Fast\")',\n  saveButton: 'button:has-text(\"Save\")'\n}\n\nconst nftApproveAllConfirmationPopup = {\n  approveButton: '.set-approval-for-all-warning__content button.set-approval-for-all-warning__footer__approve-button'\n}\n\nexport default {\n  editGasFeeMenu,\n  nftApproveAllConfirmationPopup\n}\n","import ActionFooter from './actionFooter'\nimport SignaturePage from './signaturePage'\nimport TransactionPage from './transactionPage'\n\nexport default {\n  ActionFooter,\n  SignaturePage,\n  TransactionPage\n}\n","import type { Page } from '@playwright/test'\nimport { LoadingSelectors } from '../../selectors'\n\n// TODO: Should we decrease the timeout?\n// TODO: Not sure if hard coding the timeout is a good idea but must be enough for now.\nconst DEFAULT_TIMEOUT = 10_000\n\nexport async function waitForSpinnerToVanish(page: Page) {\n  await page.locator(LoadingSelectors.spinner).waitFor({\n    state: 'hidden',\n    timeout: DEFAULT_TIMEOUT\n  })\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/UnlockPage'\nimport { waitForSpinnerToVanish } from '../../../utils/waitForSpinnerToVanish'\n\nexport async function unlock(page: Page, password: string) {\n  await page.locator(Selectors.passwordInput).fill(password)\n  await page.locator(Selectors.submitButton).click()\n\n  await waitForSpinnerToVanish(page)\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../selectors/pages/UnlockPage'\nimport { unlock } from './actions'\n\nexport class UnlockPage {\n  static readonly selectors = Selectors\n  readonly selectors = Selectors\n\n  readonly page: Page\n\n  constructor(page: Page) {\n    this.page = page\n  }\n\n  async unlock(password: string) {\n    await unlock(this.page, password)\n  }\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\n\nexport async function addNewAccount(page: Page, accountName: string) {\n  // TODO: Use zod to validate this.\n  if (accountName.length === 0) {\n    throw new Error('[AddNewAccount] Account name cannot be an empty string')\n  }\n\n  await page.locator(Selectors.accountMenu.accountButton).click()\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.addAccountButton).click()\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.createNewAccountButton).click()\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.addNewAccountMenu.accountNameInput).fill(accountName)\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.addNewAccountMenu.createButton).click()\n}\n","import { type Page, expect } from '@playwright/test'\n\nexport async function closeSuiAndMonadIfPresent(page: Page) {\n  // Wait for Phantom page to fully load\n  const walletValueUsdRegExp = new RegExp('\\\\$.*[0-9].[0-9]{1,2}.*[0-9]{1,2}\\\\%')\n  await expect(page.getByText(walletValueUsdRegExp), 'Wallet value should be visible').toBeVisible({ timeout: 15_000 })\n\n  // Reload page to trigger Sui and/or Monad screens\n  await page.reload()\n\n  // Wait for Phantom page to fully load\n  await expect(page.getByText(walletValueUsdRegExp), 'Wallet value should be visible').toBeVisible({ timeout: 15_000 })\n\n  // Wait for Sui / Monad screen to load (if it does)\n  await page.waitForTimeout(2_000)\n\n  const suiIsVisible = await page.getByRole('button', { name: 'Enable Sui' }).isVisible()\n\n  if (suiIsVisible) {\n    await page.getByRole('button', { name: 'Not Now' }).click()\n    // Wait for Nomad page to load (if it does)\n    await page.waitForTimeout(1_000)\n  }\n\n  const monadIsVisible = await page.getByRole('button', { name: 'Enable Monad' }).isVisible()\n\n  if (monadIsVisible) {\n    await page.getByRole('button', { name: 'Not Now' }).click()\n  }\n}\n","import { type Page, expect } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\nimport type { Networks } from '../../../../type/Networks'\nimport { waitFor } from '../../../utils/waitFor'\n\nexport async function importWalletFromPrivateKey(\n  page: Page,\n  network: Networks,\n  privateKey: string,\n  walletName?: string\n) {\n  await expect(page.locator(Selectors.accountMenu.accountButton)).toBeVisible()\n  await page.locator(Selectors.accountMenu.accountButton).click()\n\n  await expect(page.locator(Selectors.accountMenu.addAccountMenu.addAccountButton)).toBeVisible()\n  await page.locator(Selectors.accountMenu.addAccountMenu.addAccountButton).click()\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.importAccountPrivateKeyButton).click()\n\n  // SELECT NETWORK\n  if (network !== 'solana') {\n    await page.locator(Selectors.accountMenu.addAccountMenu.importAccountMenu.networkOpenMenu).click()\n    await page\n      .locator(Selectors.accountMenu.addAccountMenu.importAccountMenu[`${network}Network`])\n      .first()\n      .click()\n  }\n\n  await page\n    .locator(Selectors.accountMenu.addAccountMenu.importAccountMenu.nameInput)\n    .fill(walletName ?? 'ImportedWallet')\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.importAccountMenu.privateKeyInput).fill(privateKey)\n\n  const importButton = page.locator(Selectors.accountMenu.addAccountMenu.importAccountMenu.importButton)\n\n  // TODO: Extract & make configurable\n  const isImportButtonEnabled = await waitFor(() => importButton.isEnabled(), 1_000, false)\n\n  if (!isImportButtonEnabled) {\n    const errorText = await page.locator(Selectors.accountMenu.addAccountMenu.importAccountMenu.error).textContent({\n      timeout: 1_000 // TODO: Extract & make configurable\n    })\n\n    throw new Error(`[ImportWalletFromPrivateKey] Importing failed due to error: ${errorText}`)\n  }\n\n  await importButton.click()\n\n  await expect(page.locator('[data-testid*=\"fungible-token-row-\"]').first()).toBeVisible({ timeout: 10_000 })\n}\n","import type { Page } from '@playwright/test'\nimport { errors, expect } from '@playwright/test'\n\nimport Selectors from '../../selectors/pages/UnlockPage'\n\nlet retries = 0\n\nexport const waitToBeHidden = async (selector: string, page: Page) => {\n  // info: waits for 60 seconds\n  const locator = page.locator(selector)\n  for (const element of await locator.all()) {\n    if ((await element.count()) > 0 && retries < 300) {\n      retries++\n      await page.waitForTimeout(200)\n      await module.exports.waitToBeHidden(selector, page)\n    } else if (retries >= 300) {\n      retries = 0\n      throw new Error(`[waitToBeHidden] Max amount of retries reached while waiting for ${selector} to disappear.`)\n    }\n    retries = 0\n  }\n}\n\nexport const waitUntilStable = async (page: Page) => {\n  await page.waitForLoadState('load', { timeout: 10_000 })\n  await page.waitForLoadState('domcontentloaded', { timeout: 10_000 })\n}\n\nexport const waitUntilStableBeforeUnlock = async (page: Page) => {\n  await page.waitForLoadState('load', { timeout: 10_000 })\n  await page.waitForLoadState('domcontentloaded', { timeout: 10_000 })\n\n  await expect(async () => {\n    await expect(page.locator(Selectors.submitButton), '\"Unlock\" buttonshouldbe visible').toBeVisible()\n  }).toPass({ timeout: 10_000 })\n}\n\nexport const waitUntilStableNotificationPage = async (page: Page) => {\n  await page.waitForLoadState('load', { timeout: 10_000 })\n  await page.waitForLoadState('domcontentloaded', { timeout: 10_000 })\n  await page.locator('[data-testid=\"home-header-account-name\"]').waitFor({ timeout: 10_000 })\n}\n\nexport const waitForSelector = async (selector: string, page: Page, timeout: number) => {\n  await waitUntilStable(page)\n\n  try {\n    await page.waitForSelector(selector, { state: 'hidden', timeout })\n  } catch (error) {\n    if (error instanceof errors.TimeoutError) {\n      console.log(`Loading indicator '${selector}' not found - continuing.`)\n    } else {\n      console.log(`Error while waiting for loading indicator '${selector}' to disappear`)\n      throw error\n    }\n  }\n}\n\n// Inlining the sleep function here cause this is one of the few places in the entire codebase where sleep should be used!\nconst sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms))\n\nconst timeouts = [0, 20, 50, 100, 100, 500] as const\n\n// TODO: Box this function.\n// This functions mimics the one found in Playwright with a few small differences.\n// Custom implementation is needed because Playwright lists errors in the report even if they are caught.\nexport async function waitFor(action: () => Promise<boolean>, timeout: number, shouldThrow = true) {\n  let timeoutsSum = 0\n  let timeoutIndex = 0\n\n  let reachedTimeout = false\n\n  while (!reachedTimeout) {\n    let nextTimeout = timeouts.at(Math.min(timeoutIndex++, timeouts.length - 1)) as number\n\n    if (timeoutsSum + nextTimeout > timeout) {\n      nextTimeout = timeout - timeoutsSum\n      reachedTimeout = true\n    } else {\n      timeoutsSum += nextTimeout\n    }\n\n    await sleep(nextTimeout)\n\n    const result = await action()\n    if (result) {\n      return result\n    }\n  }\n\n  if (shouldThrow) {\n    throw new Error(`Timeout ${timeout}ms exceeded.`)\n  }\n\n  return false\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\n\nexport async function lock(page: Page) {\n  await page.locator(Selectors.accountMenu.accountButton).click()\n  await page.locator(Selectors.accountMenu.settings).click()\n\n  await page.locator(Selectors.settings.lockWallet).click()\n}\n","import { type Page, expect } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\nimport { allTextContents } from '../../../utils/allTextContents'\n\nexport async function renameAccount(page: Page, currentAccountName: string, newAccountName: string) {\n  // TODO: Use zod to validate this.\n  if (newAccountName.length === 0) {\n    throw new Error('[RenameAccount] Account name cannot be an empty string')\n  }\n\n  await page.locator(Selectors.accountMenu.accountButton).click()\n\n  let accountNames: string[] = []\n\n  await expect(async () => {\n    const accountNamesLocators = await page.locator(Selectors.accountMenu.accountNames).all()\n\n    accountNames = await allTextContents(accountNamesLocators)\n\n    expect(accountNames.length).toBeGreaterThan(0)\n  }).toPass()\n\n  const seekedAccountNames = accountNames.filter(\n    (name) => name.toLocaleLowerCase() === currentAccountName.toLocaleLowerCase()\n  )\n\n  if (seekedAccountNames.length === 0) {\n    throw new Error(`[SwitchAccount] Account with name ${currentAccountName} not found`)\n  }\n\n  await page.locator(Selectors.accountMenu.manageAccountsButton).click()\n\n  await page.locator(Selectors.manageAccountButton(currentAccountName)).click()\n\n  await page.locator(Selectors.editAccountMenu.accountNameButton).click()\n\n  await page.locator(Selectors.accountMenu.addAccountMenu.addNewAccountMenu.accountNameInput).fill(newAccountName)\n\n  await page.locator(Selectors.accountMenu.renameAccountMenu.saveButton).click()\n\n  // Verify that account has been renamed\n  await expect(page.locator(Selectors.editAccountMenu.accountNameButton)).toContainText(newAccountName)\n}\n","import type { Locator } from '@playwright/test'\nimport { z } from 'zod'\n\n// Custom implementation of `locator.allTextContents()` that is not utilizing `.map` which is not accessible under Phantom's scuttling mode.\nexport async function allTextContents(locators: Locator[]) {\n  const names = await Promise.all(locators.map((locator) => locator.textContent()))\n\n  // We're making sure that the return type is `string[]` same as `locator.allTextContents()`.\n  return names.map((name) => z.string().parse(name))\n}\n","import type { Page } from '@playwright/test'\nimport { homePage, notificationPage } from '../../../../selectors'\n\nasync function openSettings(page: Page) {\n  await page.locator(homePage.accountMenu.accountButton).click()\n  await page.locator(homePage.accountMenu.settings).click()\n}\n\nasync function resetApp(page: Page) {\n  await openSettings(page)\n\n  await page.locator(homePage.settings.securityAndPrivacyButton).click()\n\n  await page.waitForSelector(homePage.settings.securityAndPrivacy.resetApp)\n  await page.locator(homePage.settings.securityAndPrivacy.resetApp).click()\n\n  await page.locator(notificationPage.ActionFooter.continueActionButton).click()\n}\n\nexport const settings = {\n  openSettings,\n  resetApp\n}\n","import { type Locator, type Page, expect } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\nimport { allTextContents } from '../../../utils/allTextContents'\n\nexport async function switchAccount(page: Page, accountName: string) {\n  await page.locator(Selectors.accountMenu.accountButton).click()\n\n  let accountNamesLocators: Locator[] = []\n  let accountNames: string[] = []\n\n  await expect(async () => {\n    accountNamesLocators = await page.locator(Selectors.accountMenu.accountNames).all()\n\n    accountNames = await allTextContents(accountNamesLocators)\n\n    expect(accountNames.length).toBeGreaterThan(0)\n  }).toPass()\n\n  const seekedAccountNames = accountNames.filter((name) => name.toLocaleLowerCase() === accountName.toLocaleLowerCase())\n\n  if (seekedAccountNames.length === 0) {\n    throw new Error(`[SwitchAccount] Account with name ${accountName} not found`)\n  }\n\n  // biome-ignore lint/style/noNonNullAssertion: this non-null assertion is intentional\n  const accountIndex = accountNames.indexOf(seekedAccountNames[0]!) // TODO: handle the undefined here better\n\n  // biome-ignore lint/style/noNonNullAssertion: this non-null assertion is intentional\n  await accountNamesLocators[accountIndex]!.click() // TODO: handle the undefined here better\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\n\n// Toggling this through the network dropdown instead of the settings page is a better approach.\n// This is in most cases the faster approach, but it's also more reliable.\nexport async function toggleTestnetMode(page: Page) {\n  await page.locator(Selectors.accountMenu.accountButton).click()\n\n  await page.locator(Selectors.accountMenu.settings).click()\n\n  await page.locator(Selectors.settings.developerSettingsButton).click()\n\n  await page.locator(Selectors.settings.devSettings.toggleTestnetMode).click()\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/HomePage'\nimport type { Networks } from '../../../../type/Networks'\n\n// TODO - .getAccountAddress() to be updated for all networks\nexport default async function getAccountAddress(network: Networks, page: Page): Promise<string> {\n  // Copy account address to clipboard\n  await page.locator(Selectors.accountMenu.accountName).hover()\n  await page\n    .locator(Selectors[`${network}WalletAddress`])\n    .first()\n    .click()\n\n  // Get clipboard content\n  const handle = await page.evaluateHandle(() => navigator.clipboard.readText())\n  const account = await handle.jsonValue()\n\n  return account\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../selectors/pages/HomePage'\nimport type { Networks } from '../../../type/Networks'\nimport {\n  addNewAccount,\n  getAccountAddress,\n  importWalletFromPrivateKey,\n  lock,\n  renameAccount,\n  settings,\n  switchAccount,\n  toggleTestnetMode\n} from './actions'\n\nexport class HomePage {\n  static readonly selectors = Selectors\n  readonly selectors = Selectors\n\n  readonly page: Page\n\n  constructor(page: Page) {\n    this.page = page\n  }\n\n  async goToHomePage(extensionId: string) {\n    await this.page.goto(`chrome-extension://${extensionId}/popup.html`)\n  }\n\n  async goBackToHomePage() {\n    await this.page.locator(Selectors.settings.closeSettingsButton).click()\n  }\n\n  async lock() {\n    await lock(this.page)\n  }\n\n  async addNewAccount(accountName: string) {\n    await addNewAccount(this.page, accountName)\n  }\n\n  async renameAccount(currentAccountName: string, newAccountName: string) {\n    await renameAccount(this.page, currentAccountName, newAccountName)\n  }\n\n  async getAccountAddress(network: Networks) {\n    return await getAccountAddress(network, this.page)\n  }\n\n  async importWalletFromPrivateKey(\n    network: 'solana' | 'ethereum' | 'base' | 'polygon' | 'bitcoin',\n    privateKey: string,\n    walletName?: string\n  ) {\n    await importWalletFromPrivateKey(this.page, network, privateKey, walletName)\n  }\n\n  async switchAccount(accountName: string) {\n    await switchAccount(this.page, accountName)\n  }\n\n  async openSettings() {\n    await settings.openSettings(this.page)\n  }\n\n  async toggleTestnetMode() {\n    await toggleTestnetMode(this.page)\n  }\n\n  async resetApp() {\n    await settings.resetApp(this.page)\n  }\n}\n","import type { BrowserContext, Page } from '@playwright/test'\nimport { waitUntilStableNotificationPage } from './waitFor'\n\nexport async function getNotificationPageAndWaitForLoad(context: BrowserContext, extensionId: string) {\n  const notificationPageUrl = `chrome-extension://${extensionId}/notification.html`\n\n  const isNotificationPage = (page: Page) => page.url().includes(notificationPageUrl)\n\n  // Check if notification page is already open.\n  let notificationPage = context.pages().find(isNotificationPage)\n\n  if (!notificationPage) {\n    notificationPage = await context.waitForEvent('page', {\n      predicate: isNotificationPage,\n      timeout: 10_000\n    })\n  }\n\n  await waitUntilStableNotificationPage(notificationPage as Page)\n\n  // Set pop-up window viewport size to resemble the actual Phantom pop-up window.\n  await notificationPage.setViewportSize({\n    width: 360,\n    height: 592\n  })\n\n  await waitUntilStableNotificationPage(notificationPage as Page)\n\n  return notificationPage\n}\n","import { z } from 'zod'\n\nexport const GasSettingValidation = z.union([\n  z.literal('Slow'),\n  z.literal('Fast'),\n  z.literal('Average'),\n  z\n    .object({\n      maxBaseFee: z.number(),\n      priorityFee: z.number(),\n      // TODO: Add gasLimit range validation.\n      gasLimit: z.number().optional()\n    })\n    .superRefine(({ maxBaseFee, priorityFee }, ctx) => {\n      if (priorityFee > maxBaseFee) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Max base fee cannot be lower than priority fee',\n          path: ['Phantom', 'confirmTransaction', 'gasSetting', 'maxBaseFee']\n        })\n      }\n    })\n])\n\nexport type GasSettings = z.input<typeof GasSettingValidation>\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/NotificationPage'\nimport { GasSettingValidation, type GasSettings } from '../../../../type/GasSettings'\nimport { waitFor } from '../../../utils/waitFor'\n\nconst confirmTransaction = async (notificationPage: Page, options: GasSettings) => {\n  const gasSetting = GasSettingValidation.parse(options)\n\n  const handleNftSetApprovalForAll = async (page: Page) => {\n    try {\n      const nftApproveButtonLocator = page.locator(\n        Selectors.TransactionPage.nftApproveAllConfirmationPopup.approveButton\n      )\n      const isNfTPopupHidden = await waitFor(() => nftApproveButtonLocator.isHidden(), 3_000, false)\n\n      if (!isNfTPopupHidden) {\n        await nftApproveButtonLocator.click()\n      }\n    } catch (e) {\n      if (page.isClosed()) {\n        return\n      }\n\n      throw new Error(`Failed to handle NFT setApprovalForAll popup: ${e}`)\n    }\n  }\n\n  // By default, the `Average` gas setting is used.\n  if (gasSetting === 'Average') {\n    await notificationPage.locator(Selectors.ActionFooter.confirmActionButton).click()\n\n    await handleNftSetApprovalForAll(notificationPage)\n\n    return\n  }\n\n  // TODO: This button can be invisible in case of a network issue. Verify this, and handle in the future.\n  await notificationPage.locator(Selectors.TransactionPage.editGasFeeMenu.editGasFeeButton).click()\n\n  const handleSlowOrFastGasSetting = async (selector: string) => {\n    await notificationPage.locator(selector).click()\n  }\n\n  if (gasSetting === 'Slow') {\n    await handleSlowOrFastGasSetting(Selectors.TransactionPage.editGasFeeMenu.slowGasFeeButton)\n  } else if (gasSetting === 'Fast') {\n    await handleSlowOrFastGasSetting(Selectors.TransactionPage.editGasFeeMenu.fastGasFeeButton)\n  }\n\n  await notificationPage.locator(Selectors.TransactionPage.editGasFeeMenu.saveButton).click()\n\n  await notificationPage.locator(Selectors.ActionFooter.confirmActionButton).click()\n\n  await handleNftSetApprovalForAll(notificationPage)\n}\n\nconst rejectTransaction = async (notificationPage: Page) => {\n  await notificationPage.locator(Selectors.ActionFooter.cancelActionButton).click()\n}\n\nexport const transaction = {\n  confirm: confirmTransaction,\n  reject: rejectTransaction\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/NotificationPage'\nimport type { GasSettings } from '../../../../type/GasSettings'\nimport { transaction } from './transaction'\n\nconst approveTokenPermission = async (notificationPage: Page, gasSetting: GasSettings) => {\n  // Approve flow is identical to the confirm transaction flow after we click the \"Next\" button.\n  await transaction.confirm(notificationPage, gasSetting)\n}\n\nconst rejectTokenPermission = async (notificationPage: Page) => {\n  await notificationPage.locator(Selectors.ActionFooter.cancelActionButton).click()\n}\n\nexport const approvePermission = {\n  approve: approveTokenPermission,\n  reject: rejectTokenPermission\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/NotificationPage'\n\nasync function closeWarning(notificationPage: Page) {\n  await notificationPage.locator(Selectors.ActionFooter.closeActionButton).click()\n}\n\nexport async function closeUnsupportedNetworkWarning(notificationPage: Page) {\n  await closeWarning(notificationPage)\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/NotificationPage'\nimport { switchAccount } from '../../HomePage/actions'\n\nasync function confirmConnection(notificationPage: Page) {\n  await notificationPage.locator(Selectors.ActionFooter.connectActionButton).click()\n}\n\n// By default, the last account will be selected. If you want to select a specific account, pass `account` parameter.\nexport async function connectToDapp(notificationPage: Page, account?: string) {\n  if (account) {\n    await switchAccount(notificationPage, account)\n  }\n\n  await confirmConnection(notificationPage)\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../../selectors/pages/NotificationPage'\n\nconst signMessage = async (notificationPage: Page) => {\n  await notificationPage.locator(Selectors.ActionFooter.confirmActionButton).click()\n}\n\nconst rejectMessage = async (notificationPage: Page) => {\n  await notificationPage.locator(Selectors.ActionFooter.cancelActionButton).click()\n}\n\nconst signMessageWithRisk = async (notificationPage: Page) => {\n  await notificationPage.locator(Selectors.SignaturePage.riskModal.proceedAnyway).click()\n  await notificationPage.locator(Selectors.SignaturePage.riskModal.confirmUnsafe).click()\n  await notificationPage.locator(Selectors.SignaturePage.riskModal.acknowledgeRisks).click()\n  await notificationPage.locator(Selectors.SignaturePage.riskModal.reconfirmUnsafe).click()\n}\n\nexport const signSimpleMessage = {\n  sign: signMessage,\n  reject: rejectMessage,\n  signWithRisk: signMessageWithRisk\n}\n","import type { Page } from '@playwright/test'\nimport Selectors from '../../../selectors/pages/NotificationPage'\nimport type { GasSettings } from '../../../type/GasSettings'\nimport { getNotificationPageAndWaitForLoad } from '../../utils/getNotificationPageAndWaitForLoad'\nimport {\n  approvePermission,\n  closeUnsupportedNetworkWarning,\n  connectToDapp,\n  signSimpleMessage,\n  transaction\n} from './actions'\n\nexport class NotificationPage {\n  static readonly selectors = Selectors\n  readonly selectors = Selectors\n  readonly page: Page\n\n  constructor(page: Page) {\n    this.page = page\n  }\n\n  async connectToDapp(extensionId: string, account?: string) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await connectToDapp(notificationPage, account)\n  }\n\n  // TODO: Revisit this logic in the future to see if we can increase the performance by utilizing `Promise.race`.\n  private async beforeMessageSignature(extensionId: string) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    return {\n      notificationPage\n    }\n  }\n\n  async signMessage(extensionId: string) {\n    const { notificationPage } = await this.beforeMessageSignature(extensionId)\n\n    await signSimpleMessage.sign(notificationPage)\n  }\n\n  async signMessageWithRisk(extensionId: string) {\n    const { notificationPage } = await this.beforeMessageSignature(extensionId)\n\n    await signSimpleMessage.signWithRisk(notificationPage)\n  }\n\n  async rejectMessage(extensionId: string) {\n    const { notificationPage } = await this.beforeMessageSignature(extensionId)\n\n    await signSimpleMessage.reject(notificationPage)\n  }\n\n  async confirmTransaction(extensionId: string, options?: { gasSetting?: GasSettings }) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await transaction.confirm(notificationPage, options?.gasSetting ?? 'Average')\n  }\n\n  async rejectTransaction(extensionId: string) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await transaction.reject(notificationPage)\n  }\n\n  async approveTokenPermission(extensionId: string, options?: { gasSetting?: GasSettings }) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await approvePermission.approve(notificationPage, options?.gasSetting ?? 'Average')\n  }\n\n  async rejectTokenPermission(extensionId: string) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await approvePermission.reject(notificationPage)\n  }\n\n  async closeUnsupportedNetworkWarning(extensionId: string) {\n    const notificationPage = await getNotificationPageAndWaitForLoad(this.page.context(), extensionId)\n\n    await closeUnsupportedNetworkWarning(notificationPage)\n  }\n}\n","import type { BrowserContext, Page } from '@playwright/test'\nimport type { GasSettings } from '../type/GasSettings'\nimport type { Networks } from '../type/Networks'\nimport { PhantomAbstract } from '../type/PhantomAbstract'\nimport { HomePage, NotificationPage, OnboardingPage, UnlockPage } from './pages'\n\nconst NO_EXTENSION_ID_ERROR = new Error('Phantom extensionId is not set')\n\n/**\n * Phantom class for interacting with the Phantom extension in Playwright tests.\n *\n * This class provides methods to perform various operations on the Phantom extension,\n * such as importing wallets, switching networks, confirming transactions, and more.\n *\n * @class\n * @extends PhantomAbstract\n */\nexport class Phantom extends PhantomAbstract {\n  /**\n   * This property can be used to access selectors for the onboarding page.\n   *\n   * @public\n   * @readonly\n   */\n  readonly onboardingPage: OnboardingPage\n\n  /**\n   * This property can be used to access selectors for the lock page.\n   *\n   * @public\n   * @readonly\n   */\n  readonly unlockPage: UnlockPage\n\n  /**\n   * This property can be used to access selectors for the home page.\n   *\n   * @public\n   * @readonly\n   */\n  readonly homePage: HomePage\n\n  /**\n   * This property can be used to access selectors for the notification page.\n   *\n   * @public\n   * @readonly\n   */\n  readonly notificationPage: NotificationPage\n\n  /**\n   * Creates an instance of Phantom.\n   *\n   * @param context - The Playwright BrowserContext in which the Phantom extension is running.\n   * @param page - The Playwright Page object representing the Phantom extension's main page.\n   * @param password - The password for the Phantom wallet.\n   * @param extensionId - The ID of the Phantom extension. Optional if no interaction with dapps is required.\n   */\n  constructor(\n    readonly context: BrowserContext,\n    readonly page: Page,\n    override readonly password: string,\n    override readonly extensionId?: string\n  ) {\n    super(password, extensionId)\n\n    this.onboardingPage = new OnboardingPage(page)\n    this.unlockPage = new UnlockPage(page)\n    this.homePage = new HomePage(page)\n    this.notificationPage = new NotificationPage(page)\n  }\n\n  /**\n   * Imports a wallet using the given seed phrase.\n   *\n   * @param seedPhrase - The seed phrase to import.\n   */\n  async importWallet(seedPhrase: string): Promise<void> {\n    await this.onboardingPage.importWallet(seedPhrase, this.password)\n  }\n\n  /**\n   * Adds a new account with the given name.\n   *\n   * @param accountName - The name for the new account.\n   */\n  async addNewAccount(accountName: string): Promise<void> {\n    await this.homePage.addNewAccount(accountName)\n  }\n\n  /**\n   * Renames the currently selected account.\n   *\n   * @param currentAccountName - The current account name.\n   * @param newAccountName - The new name for the account.\n   */\n  async renameAccount(currentAccountName: string, newAccountName: string): Promise<void> {\n    await this.homePage.renameAccount(currentAccountName, newAccountName)\n  }\n\n  /**\n   * Imports a wallet using the given private key.\n   *\n   * @param network - Network that the wallet belongs to.\n   * @param privateKey - The private key to import.\n   * @param privateKey - Name given to the new wallet/account.\n   */\n  async importWalletFromPrivateKey(\n    network: 'solana' | 'ethereum' | 'base' | 'polygon' | 'bitcoin',\n    privateKey: string,\n    walletName?: string\n  ): Promise<void> {\n    await this.homePage.importWalletFromPrivateKey(network, privateKey, walletName)\n  }\n\n  /**\n   * Switches to the account with the given name.\n   *\n   * @param accountName - The name of the account to switch to.\n   */\n  async switchAccount(accountName: string): Promise<void> {\n    await this.homePage.switchAccount(accountName)\n  }\n\n  /**\n   * Gets the address of the currently selected account.\n   *\n   * @param network - Network that the address belongs to.\n   * @returns The account address.\n   */\n  async getAccountAddress(network: Networks): Promise<string> {\n    return await this.homePage.getAccountAddress(network)\n  }\n\n  /**\n   * Connects Phantom to a dapp.\n   *\n   * @param accounts - Optional array of account addresses to connect.\n   * @throws {Error} If extensionId is not set.\n   */\n  async connectToDapp(account?: string): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.connectToDapp(this.extensionId, account)\n  }\n\n  /**\n   * Locks the Phantom wallet.\n   */\n  async lock(): Promise<void> {\n    await this.homePage.lock()\n  }\n\n  /**\n   * Unlocks the Phantom wallet.\n   */\n  async unlock(): Promise<void> {\n    await this.unlockPage.unlock(this.password)\n  }\n\n  /**\n   * Confirms a signature request.\n   *\n   * @throws {Error} If extensionId is not set.\n   */\n  async confirmSignature(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.signMessage(this.extensionId)\n  }\n\n  /**\n   * Confirms a signature request with risk.\n   *\n   * @throws {Error} If extensionId is not set.\n   */\n  async confirmSignatureWithRisk(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.signMessageWithRisk(this.extensionId)\n  }\n\n  /**\n   * Rejects a signature request.\n   *\n   * @throws {Error} If extensionId is not set.\n   */\n  async rejectSignature(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.rejectMessage(this.extensionId)\n  }\n\n  /**\n   * Confirms a transaction.\n   *\n   * @param options - Optional gas settings for the transaction.\n   * @throws {Error} If extensionId is not set.\n   */\n  async confirmTransaction(options?: {\n    gasSetting?: GasSettings\n  }): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.confirmTransaction(this.extensionId, options)\n  }\n\n  /**\n   * Rejects a transaction.\n   *\n   * @throws {Error} If extensionId is not set.\n   */\n  async rejectTransaction(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.rejectTransaction(this.extensionId)\n  }\n\n  /**\n   * Approves a token permission request.\n   *\n   * @param options - Optional settings for the approval.\n   * @throws {Error} If extensionId is not set.\n   */\n  async approveTokenPermission(options?: {\n    spendLimit?: 'max' | number\n    gasSetting?: GasSettings\n  }): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.approveTokenPermission(this.extensionId, options)\n  }\n\n  /**\n   * Rejects a token permission request.\n   *\n   * @throws {Error} If extensionId is not set.\n   */\n  async rejectTokenPermission(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.rejectTokenPermission(this.extensionId)\n  }\n\n  /**\n   * Navigates to the home page or wallet dashboard.\n   */\n  async goToHomePage(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.homePage.goToHomePage(this.extensionId)\n  }\n\n  /**\n   * Navigates back to the home page.\n   */\n  async goBackToHomePage(): Promise<void> {\n    await this.homePage.goBackToHomePage()\n  }\n\n  /**\n   * Opens the settings page.\n   */\n  async openSettings(): Promise<void> {\n    await this.homePage.openSettings()\n  }\n\n  /**\n   * Toggles the display of test networks.\n   */\n  async toggleTestnetMode(): Promise<void> {\n    await this.homePage.toggleTestnetMode()\n  }\n\n  /**\n   * Resets the account.\n   */\n  async resetApp(): Promise<void> {\n    await this.homePage.resetApp()\n  }\n\n  /**\n   * Connects Phantom to a dapp.\n   *\n   * @param accounts - Optional array of account addresses to connect.\n   * @throws {Error} If extensionId is not set.\n   */\n  async closeUnsupportedNetworkWarning(): Promise<void> {\n    if (!this.extensionId) {\n      throw NO_EXTENSION_ID_ERROR\n    }\n\n    await this.notificationPage.closeUnsupportedNetworkWarning(this.extensionId)\n  }\n}\n","import path from 'node:path'\nimport { type Page, chromium } from '@playwright/test'\nimport { test as base } from '@playwright/test'\nimport {\n  CACHE_DIR_NAME,\n  createTempContextDir,\n  defineWalletSetup,\n  removeTempContextDir\n} from '@synthetixio/synpress-cache'\nimport fs from 'fs-extra'\nimport { prepareExtensionPhantom } from '../../prepareExtensionPhantom'\nimport { Phantom } from '../Phantom'\nimport { getExtensionIdPhantom } from '../fixture-actions'\nimport { persistLocalStorage } from '../fixture-actions/persistLocalStorage'\nimport { closeSuiAndMonadIfPresent } from '../pages/HomePage/actions/closeSuiAndMonadScreen'\nimport { unlock } from '../pages/UnlockPage/actions'\nimport { loadAndWaitForPopupPage } from '../utils/loadAndWaitForPopupPage'\n\ntype PhantomFixtures = {\n  _contextPath: string\n  phantom: Phantom\n  extensionId: string\n  phantomPage: Page\n}\n\n// If setup phantomPage in a fixture, browser does not handle it properly (even if ethereum.isConnected() is true, it's not reflected on the page).\nlet _phantomPage: Page\n\nexport const phantomFixtures = (walletSetup: ReturnType<typeof defineWalletSetup>, slowMo = 0) => {\n  return base.extend<PhantomFixtures>({\n    _contextPath: async ({ browserName }, use, testInfo) => {\n      const contextPath = await createTempContextDir(browserName, testInfo.testId)\n\n      await use(contextPath)\n\n      const error = await removeTempContextDir(contextPath)\n      if (error) {\n        console.error(error)\n      }\n    },\n    context: async ({ context: currentContext, _contextPath }, use) => {\n      const cacheDirPath = path.join(process.cwd(), CACHE_DIR_NAME, walletSetup.hash)\n      if (!(await fs.exists(cacheDirPath))) {\n        throw new Error(`Cache for ${walletSetup.hash} does not exist. Create it first!`)\n      }\n\n      // Copying the cache to the temporary context directory.\n      await fs.copy(cacheDirPath, _contextPath)\n\n      const phantomPath = await prepareExtensionPhantom()\n\n      // We don't need the `--load-extension` arg since the extension is already loaded in the cache.\n      const browserArgs = [`--disable-extensions-except=${phantomPath}`]\n\n      if (process.env.HEADLESS) {\n        browserArgs.push('--headless=new')\n\n        if (slowMo > 0) {\n          console.warn('[WARNING] Slow motion makes no sense in headless mode. It will be ignored!')\n        }\n      }\n\n      const context = await chromium.launchPersistentContext(_contextPath, {\n        headless: false,\n        args: browserArgs,\n        slowMo: process.env.HEADLESS ? 0 : slowMo\n      })\n\n      const { cookies, origins } = await currentContext.storageState()\n\n      if (cookies) {\n        await context.addCookies(cookies)\n      }\n      if (origins && origins.length > 0) {\n        await persistLocalStorage(origins, context)\n      }\n\n      const extensionId = await getExtensionIdPhantom(context, 'Phantom')\n\n      _phantomPage = await loadAndWaitForPopupPage(context, extensionId)\n\n      await unlock(_phantomPage, walletSetup.walletPassword)\n\n      await use(context)\n\n      await context.close()\n    },\n    phantomPage: async ({ context: _ }, use) => {\n      await closeSuiAndMonadIfPresent(_phantomPage)\n\n      await use(_phantomPage)\n    },\n    extensionId: async ({ context }, use) => {\n      const extensionId = await getExtensionIdPhantom(context, 'Phantom')\n\n      await use(extensionId)\n    },\n    phantom: async ({ context, extensionId }, use) => {\n      const phantom = new Phantom(context, _phantomPage, walletSetup.walletPassword, extensionId)\n\n      await use(phantom)\n    },\n    page: async ({ page }, use) => {\n      await page.goto('/')\n\n      await use(page)\n    }\n  })\n}\n","import path from 'node:path'\nimport { downloadFile, ensureCacheDirExists, unzipArchivePhantom } from '@synthetixio/synpress-cache'\nimport fs from 'fs-extra'\n\nexport const PHANTOM_EXTENSION_DOWNLOAD_URL = 'https://crx-backup.phantom.dev/latest.crx'\n\nexport async function prepareExtensionPhantom(forceCache = true) {\n  let outputDir = ''\n  if (forceCache) {\n    outputDir = ensureCacheDirExists()\n  } else {\n    outputDir = process.platform === 'win32' ? `file:\\\\\\\\\\\\${outputDir}` : path.resolve('./', 'downloads')\n\n    if (!(await fs.exists(outputDir))) {\n      fs.mkdirSync(outputDir)\n    }\n  }\n\n  const downloadResult = await downloadFile({\n    url: PHANTOM_EXTENSION_DOWNLOAD_URL,\n    outputDir,\n    fileName: 'phantom-chrome-latest.crx'\n  })\n\n  const unzipResult = await unzipArchivePhantom({\n    archivePath: downloadResult.filePath\n  })\n\n  return unzipResult.outputPath\n}\n","import type { Page } from '@playwright/test'\nimport { errors as playwrightErrors } from '@playwright/test'\nimport { Phantom } from '..'\nimport { waitForSpinnerToVanish } from '../utils/waitForSpinnerToVanish'\n\n/**\n *  A more advanced version of the `Phantom.unlock()` function that incorporates various workarounds for Phantom issues, among other things.\n *  This function should be used instead of the `Phantom.unlock()` when passing it to the `testWithSynpress` function.\n *\n * @param page - The Phantom tab page.\n * @param password - The password of the Phantom wallet.\n */\nexport async function unlockForFixturePhantom(page: Page, password: string) {\n  const phantom = new Phantom(page.context(), page, password)\n\n  await unlockWalletButReloadIfSpinnerDoesNotVanish(phantom)\n}\n\nasync function unlockWalletButReloadIfSpinnerDoesNotVanish(phantom: Phantom) {\n  try {\n    await phantom.unlock()\n  } catch (e) {\n    if (e instanceof playwrightErrors.TimeoutError) {\n      console.warn('[UnlockWalletButReloadIfSpinnerDoesNotVanish] Unlocking Phantom timed out. Reloading page...')\n\n      const page = phantom.page\n\n      await page.reload()\n      await waitForSpinnerToVanish(page)\n    } else {\n      throw e\n    }\n  }\n}\n","import type { BrowserContext } from '@playwright/test'\nimport { z } from 'zod'\n\nconst Extension = z.object({\n  id: z.string(),\n  name: z.string()\n})\n\nconst Extensions = z.array(Extension)\n\n/**\n * Returns the extension ID for the given extension name. The ID is fetched from the `chrome://extensions` page.\n *\n * ::: tip\n * This function soon will be removed to improve the developer experience! \n * :::\n *\n * @param context - The browser context.\n * @param extensionName - The name of the extension, e.g., `Phantom`.\n *\n * @returns The extension ID.\n */\nexport async function getExtensionIdPhantom(context: BrowserContext, extensionName: string) {\n  const page = await context.newPage()\n  await page.goto('chrome://extensions')\n\n  const unparsedExtensions = await page.evaluate('chrome.management.getAll()')\n\n  const allExtensions = Extensions.parse(unparsedExtensions)\n  const targetExtension = allExtensions.find(\n    (extension) => extension.name.toLowerCase() === extensionName.toLowerCase()\n  )\n\n  if (!targetExtension) {\n    throw new Error(\n      [\n        `[GetExtensionId] Extension with name ${extensionName} not found.`,\n        `Available extensions: ${allExtensions.map((extension) => extension.name).join(', ')}`\n      ].join('\\n')\n    )\n  }\n\n  await page.close()\n\n  return targetExtension.id\n}\n","import type { BrowserContext } from '@playwright/test'\n\nexport async function persistLocalStorage(\n  origins: {\n    origin: string\n    localStorage: { name: string; value: string }[]\n  }[],\n  context: BrowserContext\n) {\n  const newPage = await context.newPage()\n\n  for (const { origin, localStorage } of origins) {\n    const frame = newPage.mainFrame()\n    await frame.goto(origin)\n\n    await frame.evaluate((localStorageData) => {\n      localStorageData.forEach(({ name, value }) => {\n        window.localStorage.setItem(name, value)\n      })\n    }, localStorage)\n  }\n\n  await newPage.close()\n}\n","import { type BrowserContext, type Page, expect } from '@playwright/test'\nimport { waitUntilStableBeforeUnlock } from './waitFor'\nimport { waitForTestPageLoad } from './waitForTestPageLoad'\n\nexport async function loadAndWaitForPopupPage(context: BrowserContext, extensionId: string) {\n  let popupPage: Page = context.pages()[0] as Page\n\n  await expect(async () => {\n    popupPage = await context.newPage()\n\n    await waitForTestPageLoad(context)\n\n    await popupPage.goto(`chrome-extension://${extensionId}/popup.html`)\n\n    await waitUntilStableBeforeUnlock(popupPage)\n  }).toPass()\n\n  return popupPage\n}\n","import type { BrowserContext, Page } from '@playwright/test'\nimport { waitUntilStable } from './waitFor'\n\nexport async function waitForTestPageLoad(context: BrowserContext) {\n  const testPageUrl = 'about:blank'\n\n  const isTestPage = (page: Page) => page.url().includes(testPageUrl)\n\n  // Check if test page is already open.\n  let testPage = context.pages().find(isTestPage)\n\n  if (!testPage) {\n    testPage = await context.waitForEvent('page', {\n      predicate: isTestPage,\n      timeout: 10_000\n    })\n  }\n\n  await waitUntilStable(testPage as Page)\n}\n"]}